{"version":3,"file":"src_components_CodeSuggestion_CodeSuggestionRoot_tsx-src_components_CodeSuggestion_index_ts.js","mappings":"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CA;AACA;AACA;AACA,oBAAoB,6CAAM;AAC1B,aAAa,+CAAQ;AACrB;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,YAAY,sDAAI,CAAC,0DAAe,IAAI,wBAAwB,uDAAK,CAAC,iDAAM,QAAQ;AAChF;AACA;AACA,aAAa,aAAa,oBAAoB,aAAa,kBAAkB,UAAU,oBAAoB,gBAAgB,eAAe,aAAa,uDAAK,UAAU,wCAAwC,sDAAI,UAAU,oCAAoC,sDAAI,QAAQ,+BAA+B,GAAG,GAAG,sDAAI,UAAU,+DAA+D,IAAI,GAAG,uDAAK,UAAU,wCAAwC,sDAAI,aAAa,gEAAgE,GAAG,sDAAI,aAAa,6EAA6E,IAAI,IAAI,IAAI;AAC1nB;AACA,iEAAe,oBAAoB,EAAC;;;;;;;;;;;;;;;;;;;;AC7DY;AACJ;AACc;AACiB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA,aAAa,+CAAQ;AACrB,aAAa,+CAAQ,GAAG,iBAAiB;AACzC,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB,aAAa,+CAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gBAAgB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,gDAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qEAAa;AACtD;AACA;AACA;AACA,6CAA6C,qEAAa;AAC1D;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,qEAAa;AACxD;AACA,6CAA6C,qEAAa;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,YAAY,sDAAI,CAAC,6DAAoB,IAAI,0IAA0I;AACnL;AACA,iEAAe,iBAAiB,EAAC;;;;;;;;;;;;;;;;;;;;ACtHwC;AACN;AACE;;;;;;;;;;;;;;;;;ACFrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gDAAgD,4BAA4B;AAC5E;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wDAAwD;AACxD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wCAAwC,GAAG;AAC3C;AACA;AACA;AACA,KAAK;AACL;AACA,4BAA4B,cAAc,UAAU;AACpD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,sCAAsC,qBAAqB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://cobra-extension/./src/components/CodeSuggestion/CodeSuggestionWidget.css","webpack://cobra-extension/./src/components/CodeSuggestion/CodeSuggestionRoot.tsx","webpack://cobra-extension/./src/components/CodeSuggestion/CodeSuggestionWidget.css?5fb1","webpack://cobra-extension/./src/components/CodeSuggestion/CodeSuggestionWidget.tsx","webpack://cobra-extension/./src/components/CodeSuggestion/SelectionDetector.tsx","webpack://cobra-extension/./src/components/CodeSuggestion/index.ts","webpack://cobra-extension/./src/services/codeAnalysis.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.code-suggestion-widget {\n  position: absolute;\n  z-index: 10000;\n  width: 300px;\n  background-color: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08), 0 0 1px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  animation: slide-up 0.2s ease-out;\n  user-select: none;\n}\n\n.widget-content {\n  display: flex;\n  padding: 16px;\n  align-items: flex-start;\n  gap: 12px;\n}\n\n.widget-icon {\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background-color: #f4f0ff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #8B5CF6;\n  flex-shrink: 0;\n}\n\n.widget-icon i {\n  font-size: 14px;\n}\n\n.widget-suggestion {\n  font-size: 14px;\n  color: #333;\n  flex: 1;\n  line-height: 1.5;\n}\n\n.widget-actions {\n  display: flex;\n  padding: 12px 16px;\n  gap: 8px;\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\n  background-color: #fcfcfd;\n}\n\n.action-button {\n  padding: 8px 12px;\n  font-size: 13px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: 500;\n  transition: all 0.15s ease;\n  border: none;\n  outline: none;\n}\n\n.action-button.apply {\n  background-color: #8B5CF6;\n  color: white;\n  border: 1px solid #8B5CF6;\n}\n\n.action-button.apply:hover {\n  background-color: #7c4dff;\n}\n\n.action-button.dismiss {\n  background-color: transparent;\n  color: #666;\n  border: 1px solid #ddd;\n}\n\n.action-button.dismiss:hover {\n  background-color: #f5f5f5;\n  color: #333;\n}\n\n@keyframes slide-up {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Tooltip arrow */\n.code-suggestion-widget::before {\n  content: '';\n  position: absolute;\n  top: -8px;\n  left: 20px;\n  width: 16px;\n  height: 16px;\n  background-color: white;\n  transform: rotate(45deg);\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  border-left: 1px solid rgba(0, 0, 0, 0.1);\n} `, \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/CodeSuggestion/CodeSuggestionWidget.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,cAAc;EACd,YAAY;EACZ,uBAAuB;EACvB,kBAAkB;EAClB,sEAAsE;EACtE,gBAAgB;EAChB,yGAAyG;EACzG,oCAAoC;EACpC,iCAAiC;EACjC,iBAAiB;AACnB;;AAEA;EACE,aAAa;EACb,aAAa;EACb,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,kBAAkB;EAClB,yBAAyB;EACzB,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;EACd,cAAc;AAChB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,OAAO;EACP,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,kBAAkB;EAClB,QAAQ;EACR,yCAAyC;EACzC,yBAAyB;AAC3B;;AAEA;EACE,iBAAiB;EACjB,eAAe;EACf,kBAAkB;EAClB,eAAe;EACf,gBAAgB;EAChB,0BAA0B;EAC1B,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,yBAAyB;EACzB,YAAY;EACZ,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,6BAA6B;EAC7B,WAAW;EACX,sBAAsB;AACxB;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE;IACE,UAAU;IACV,2BAA2B;EAC7B;EACA;IACE,UAAU;IACV,wBAAwB;EAC1B;AACF;;AAEA,kBAAkB;AAClB;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,UAAU;EACV,WAAW;EACX,YAAY;EACZ,uBAAuB;EACvB,wBAAwB;EACxB,wCAAwC;EACxC,yCAAyC;AAC3C\",\"sourcesContent\":[\".code-suggestion-widget {\\n  position: absolute;\\n  z-index: 10000;\\n  width: 300px;\\n  background-color: white;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08), 0 0 1px rgba(0, 0, 0, 0.1);\\n  overflow: hidden;\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\\n  border: 1px solid rgba(0, 0, 0, 0.1);\\n  animation: slide-up 0.2s ease-out;\\n  user-select: none;\\n}\\n\\n.widget-content {\\n  display: flex;\\n  padding: 16px;\\n  align-items: flex-start;\\n  gap: 12px;\\n}\\n\\n.widget-icon {\\n  width: 24px;\\n  height: 24px;\\n  border-radius: 50%;\\n  background-color: #f4f0ff;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: #8B5CF6;\\n  flex-shrink: 0;\\n}\\n\\n.widget-icon i {\\n  font-size: 14px;\\n}\\n\\n.widget-suggestion {\\n  font-size: 14px;\\n  color: #333;\\n  flex: 1;\\n  line-height: 1.5;\\n}\\n\\n.widget-actions {\\n  display: flex;\\n  padding: 12px 16px;\\n  gap: 8px;\\n  border-top: 1px solid rgba(0, 0, 0, 0.05);\\n  background-color: #fcfcfd;\\n}\\n\\n.action-button {\\n  padding: 8px 12px;\\n  font-size: 13px;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  font-weight: 500;\\n  transition: all 0.15s ease;\\n  border: none;\\n  outline: none;\\n}\\n\\n.action-button.apply {\\n  background-color: #8B5CF6;\\n  color: white;\\n  border: 1px solid #8B5CF6;\\n}\\n\\n.action-button.apply:hover {\\n  background-color: #7c4dff;\\n}\\n\\n.action-button.dismiss {\\n  background-color: transparent;\\n  color: #666;\\n  border: 1px solid #ddd;\\n}\\n\\n.action-button.dismiss:hover {\\n  background-color: #f5f5f5;\\n  color: #333;\\n}\\n\\n@keyframes slide-up {\\n  from {\\n    opacity: 0;\\n    transform: translateY(10px);\\n  }\\n  to {\\n    opacity: 1;\\n    transform: translateY(0);\\n  }\\n}\\n\\n/* Tooltip arrow */\\n.code-suggestion-widget::before {\\n  content: '';\\n  position: absolute;\\n  top: -8px;\\n  left: 20px;\\n  width: 16px;\\n  height: 16px;\\n  background-color: white;\\n  transform: rotate(45deg);\\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\\n  border-left: 1px solid rgba(0, 0, 0, 0.1);\\n} \"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { SelectionDetector } from './index';\nvar CodeSuggestionRoot = function () {\n    var _a = useState(null), container = _a[0], setContainer = _a[1];\n    useEffect(function () {\n        // Create container for the suggestion UI\n        var rootContainer = document.createElement('div');\n        rootContainer.id = 'cobra-code-suggestion-root';\n        rootContainer.style.position = 'absolute';\n        rootContainer.style.top = '0';\n        rootContainer.style.left = '0';\n        rootContainer.style.width = '0';\n        rootContainer.style.height = '0';\n        rootContainer.style.overflow = 'visible';\n        rootContainer.style.pointerEvents = 'none';\n        rootContainer.style.zIndex = '10000';\n        // Add container to the document\n        document.body.appendChild(rootContainer);\n        setContainer(rootContainer);\n        // Clean up on unmount\n        return function () {\n            document.body.removeChild(rootContainer);\n        };\n    }, []);\n    // Return null if the container doesn't exist yet\n    if (!container)\n        return null;\n    // Use a portal to render the SelectionDetector into the container\n    return ReactDOM.createPortal(_jsx(SelectionDetector, {}), container);\n};\nexport default CodeSuggestionRoot;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./CodeSuggestionWidget.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./CodeSuggestionWidget.css\";\n       export default content && content.locals ? content.locals : undefined;\n","import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport './CodeSuggestionWidget.css';\nvar defaultSuggestions = [\n    \"Consider simplifying this expression\",\n    \"Check for off-by-one error\",\n    \"Unused variable detected\",\n    \"This could cause a null pointer exception\",\n    \"Consider using a more efficient algorithm\",\n    \"This loop could be optimized\",\n    \"Potential memory leak here\",\n    \"Consider adding a condition to handle edge cases\",\n];\nvar CodeSuggestionWidget = function (_a) {\n    var selectedText = _a.selectedText, onDismiss = _a.onDismiss, position = _a.position, isVisible = _a.isVisible, suggestion = _a.suggestion;\n    var widgetRef = useRef(null);\n    var _b = useState(\"\"), displayedSuggestion = _b[0], setDisplayedSuggestion = _b[1];\n    // Get a suggestion based on the selected text\n    useEffect(function () {\n        if (selectedText && isVisible) {\n            if (suggestion) {\n                // Use provided suggestion if available\n                setDisplayedSuggestion(suggestion);\n            }\n            else {\n                // Fallback to random suggestion\n                var randomIndex = Math.floor(Math.random() * defaultSuggestions.length);\n                setDisplayedSuggestion(defaultSuggestions[randomIndex]);\n            }\n        }\n    }, [selectedText, isVisible, suggestion]);\n    // Handle click outside to dismiss\n    useEffect(function () {\n        var handleClickOutside = function (event) {\n            if (widgetRef.current && !widgetRef.current.contains(event.target)) {\n                onDismiss();\n            }\n        };\n        // Handle escape key to dismiss\n        var handleKeyDown = function (event) {\n            if (event.key === 'Escape') {\n                onDismiss();\n            }\n        };\n        if (isVisible) {\n            document.addEventListener('mousedown', handleClickOutside);\n            document.addEventListener('keydown', handleKeyDown);\n        }\n        return function () {\n            document.removeEventListener('mousedown', handleClickOutside);\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, [isVisible, onDismiss]);\n    if (!isVisible || !selectedText)\n        return null;\n    return (_jsx(AnimatePresence, { children: isVisible && (_jsxs(motion.div, { ref: widgetRef, className: \"code-suggestion-widget\", style: {\n                top: position.top,\n                left: position.left,\n            }, initial: { opacity: 0, y: -10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, transition: { duration: 0.2 }, children: [_jsxs(\"div\", { className: \"widget-content\", children: [_jsx(\"div\", { className: \"widget-icon\", children: _jsx(\"i\", { className: \"fas fa-lightbulb\" }) }), _jsx(\"div\", { className: \"widget-suggestion\", children: displayedSuggestion })] }), _jsxs(\"div\", { className: \"widget-actions\", children: [_jsx(\"button\", { className: \"action-button apply\", children: \"Apply suggestion\" }), _jsx(\"button\", { className: \"action-button dismiss\", onClick: onDismiss, children: \"Dismiss\" })] })] })) }));\n};\nexport default CodeSuggestionWidget;\n","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport CodeSuggestionWidget from './CodeSuggestionWidget';\nimport { isCodeSnippet, getSuggestion } from '../../services/codeAnalysis';\n// Using an enum to define the selectable elements\nvar SelectableElement;\n(function (SelectableElement) {\n    SelectableElement[\"CodeEditor\"] = \"div.monaco-editor\";\n    SelectableElement[\"LeetcodeCodeArea\"] = \"div.CodeMirror\";\n    SelectableElement[\"AnyPre\"] = \"pre\";\n})(SelectableElement || (SelectableElement = {}));\nvar SelectionDetector = function () {\n    var _a = useState(''), selectedText = _a[0], setSelectedText = _a[1];\n    var _b = useState({ top: 0, left: 0 }), widgetPosition = _b[0], setWidgetPosition = _b[1];\n    var _c = useState(false), isWidgetVisible = _c[0], setIsWidgetVisible = _c[1];\n    var _d = useState(null), selectionTimeout = _d[0], setSelectionTimeout = _d[1];\n    var _e = useState(''), suggestion = _e[0], setSuggestion = _e[1];\n    // Function to check if the selection is within a code editor\n    var isSelectionInCodeEditor = function (selection) {\n        if (!selection || selection.isCollapsed)\n            return false;\n        // Get the common ancestor of the selection\n        var range = selection.getRangeAt(0);\n        var container = range.commonAncestorContainer;\n        // Check if the selection is within any of our target elements\n        for (var _i = 0, _a = Object.values(SelectableElement); _i < _a.length; _i++) {\n            var selector = _a[_i];\n            if (container.nodeType === Node.ELEMENT_NODE &&\n                container.closest(selector)) {\n                return true;\n            }\n            if (container.nodeType === Node.TEXT_NODE &&\n                container.parentElement &&\n                container.parentElement.closest(selector)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    // Function to get the position for the widget\n    var getWidgetPosition = function (selection) {\n        var range = selection.getRangeAt(0);\n        var rect = range.getBoundingClientRect();\n        // Calculate position of the widget, placing it above and centered over the selection\n        // with some offset to not cover the selection\n        return {\n            top: window.scrollY + rect.top - 60, // 50px above the selection\n            left: window.scrollX + rect.left + (rect.width / 2) - 150, // Centered (widget width is 300px)\n        };\n    };\n    // Handle text selection changes\n    useEffect(function () {\n        var handleSelectionChange = function () {\n            var selection = window.getSelection();\n            // Clear any existing timeout\n            if (selectionTimeout) {\n                clearTimeout(selectionTimeout);\n                setSelectionTimeout(null);\n            }\n            // Check if there's a valid selection within a code editor\n            if (selection && !selection.isCollapsed && isSelectionInCodeEditor(selection)) {\n                var text_1 = selection.toString().trim();\n                // Only proceed if we have meaningful text (e.g., not just whitespace)\n                if (text_1.length > 0 && isCodeSnippet(text_1)) {\n                    // Set a small delay before showing the widget to avoid it appearing for very brief selections\n                    var timeout = setTimeout(function () {\n                        // Get suggestion for the selected code\n                        var codeSuggestion = getSuggestion(text_1);\n                        setSelectedText(text_1);\n                        setSuggestion(codeSuggestion);\n                        setWidgetPosition(getWidgetPosition(selection));\n                        setIsWidgetVisible(true);\n                    }, 300);\n                    setSelectionTimeout(timeout);\n                }\n                else {\n                    setIsWidgetVisible(false);\n                }\n            }\n            else {\n                // No valid selection, but don't hide widget immediately \n                // (user might be interacting with the widget itself)\n            }\n        };\n        // Handle mouseup to check selection (sometimes selectionchange doesn't fire as expected)\n        var handleMouseUp = function () {\n            // Small delay to ensure selection is complete\n            setTimeout(function () {\n                var selection = window.getSelection();\n                if (selection && !selection.isCollapsed && isSelectionInCodeEditor(selection)) {\n                    var text = selection.toString().trim();\n                    if (text.length > 0 && isCodeSnippet(text)) {\n                        // Get suggestion for the selected code\n                        var codeSuggestion = getSuggestion(text);\n                        setSelectedText(text);\n                        setSuggestion(codeSuggestion);\n                        setWidgetPosition(getWidgetPosition(selection));\n                        setIsWidgetVisible(true);\n                    }\n                }\n            }, 100);\n        };\n        // Attach event listeners\n        document.addEventListener('selectionchange', handleSelectionChange);\n        document.addEventListener('mouseup', handleMouseUp);\n        return function () {\n            document.removeEventListener('selectionchange', handleSelectionChange);\n            document.removeEventListener('mouseup', handleMouseUp);\n            if (selectionTimeout)\n                clearTimeout(selectionTimeout);\n        };\n    }, [selectionTimeout]);\n    // Handle widget dismissal\n    var handleDismissWidget = function () {\n        setIsWidgetVisible(false);\n    };\n    return (_jsx(CodeSuggestionWidget, { selectedText: selectedText, onDismiss: handleDismissWidget, position: widgetPosition, isVisible: isWidgetVisible, suggestion: suggestion }));\n};\nexport default SelectionDetector;\n","export { default as CodeSuggestionWidget } from './CodeSuggestionWidget';\nexport { default as SelectionDetector } from './SelectionDetector';\nexport { default as CodeSuggestionRoot } from './CodeSuggestionRoot';\n","/**\n * Simple rules for code analysis\n * In a production environment, this would be more comprehensive\n */\nvar rules = [\n    {\n        pattern: /i\\s*\\+\\+\\s*</,\n        suggestion: \"Check for potential off-by-one error with increment\",\n        type: \"warning\",\n        confidence: 0.7\n    },\n    {\n        pattern: /i\\s*\\-\\-\\s*</,\n        suggestion: \"Check for potential off-by-one error with decrement\",\n        type: \"warning\",\n        confidence: 0.7\n    },\n    {\n        pattern: /(\\w+)\\s*=\\s*new\\s+\\w+.*(?!\\1\\s*=\\s*null)/,\n        suggestion: \"Potential memory leak - object created but never cleaned up\",\n        type: \"warning\",\n        confidence: 0.6\n    },\n    {\n        pattern: /for\\s*\\(\\s*let\\s+i\\s*=\\s*0\\s*;\\s*i\\s*<\\s*(\\w+)\\.length\\s*;/,\n        suggestion: \"Consider caching the length property outside the loop for better performance\",\n        type: \"improvement\",\n        confidence: 0.8\n    },\n    {\n        pattern: /\\.push\\([^)]*\\)\\s*.*\\.push\\(/,\n        suggestion: \"Multiple array pushes could be combined for better readability\",\n        type: \"improvement\",\n        confidence: 0.5\n    },\n    {\n        pattern: /if\\s*\\(\\s*(\\w+)\\s*!==?\\s*null\\s*\\)\\s*{\\s*\\1\\./,\n        suggestion: \"Consider using optional chaining (?.) for null checks\",\n        type: \"improvement\",\n        confidence: 0.9\n    },\n    {\n        pattern: /console\\.log/,\n        suggestion: \"Remember to remove console.log statements before submission\",\n        type: \"info\",\n        confidence: 0.95\n    },\n    {\n        pattern: /=[^=]=+/,\n        suggestion: \"Check equality operator - did you mean === instead of ==?\",\n        type: \"error\",\n        confidence: 0.8\n    },\n    {\n        pattern: /const\\s+(\\w+)[^=]*=[^;]*;\\s*\\1\\s*=/,\n        suggestion: \"Reassigning a constant variable will cause an error\",\n        type: \"error\",\n        confidence: 0.9\n    },\n    {\n        pattern: /if\\s*\\([^{]*\\)\\s*\\w+[^{;](?!\\s*[{;])/,\n        suggestion: \"Missing curly braces in if statement - consider adding them for clarity\",\n        type: \"warning\",\n        confidence: 0.7\n    },\n    {\n        pattern: /(\\w+)\\s*=\\s*(\\w+)/,\n        suggestion: \"Check variable assignment - is this the correct variable?\",\n        type: \"info\",\n        confidence: 0.3\n    },\n    {\n        pattern: /(\\w+)\\s*\\+\\+\\s*;\\s*return\\s+\\1/,\n        suggestion: \"Incrementing after the return won't affect the returned value\",\n        type: \"error\",\n        confidence: 0.85\n    }\n];\n/**\n * Analyzes a code snippet and returns suggestions.\n */\nexport function analyzeCode(code) {\n    // Simple code analysis logic\n    for (var _i = 0, rules_1 = rules; _i < rules_1.length; _i++) {\n        var rule = rules_1[_i];\n        if (rule.pattern.test(code)) {\n            return {\n                suggestion: rule.suggestion,\n                type: rule.type,\n                confidence: rule.confidence\n            };\n        }\n    }\n    // No matching rule found\n    return null;\n}\n/**\n * Determines if the code snippet is worth analyzing.\n * This helps filter out small selections that might not be code.\n */\nexport function isCodeSnippet(text) {\n    // Trim the text and check if it has enough content to be code\n    var trimmed = text.trim();\n    // Check if it's too short\n    if (trimmed.length < 3)\n        return false;\n    // Check if it contains any programming-like characters\n    var codeCharacters = /[(){}\\[\\];=+\\-*/%<>!&|^~?:]/;\n    return codeCharacters.test(trimmed);\n}\n/**\n * Gets context-specific suggestions based on the code.\n */\nexport function getSuggestion(code) {\n    // Try to analyze the code\n    var analysis = analyzeCode(code);\n    // If we have a high-confidence suggestion, use it\n    if (analysis && analysis.confidence > 0.6) {\n        return analysis.suggestion;\n    }\n    // Fallback suggestions for when we can't analyze the code\n    var fallbackSuggestions = [\n        \"Review this code for edge cases\",\n        \"Consider optimizing this section for better performance\",\n        \"Check for potential null or undefined values\",\n        \"This could be simplified for better readability\",\n        \"Ensure this logic handles all possible scenarios\"\n    ];\n    // Return a random fallback suggestion\n    var randomIndex = Math.floor(Math.random() * fallbackSuggestions.length);\n    return fallbackSuggestions[randomIndex];\n}\n"],"names":[],"sourceRoot":""}